<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.solarnetwork.central.dras.dao.mybatis.Effective">
	
	<insert id="insert-Effective" parameterType="Effective">
		<selectKey resultType="long" keyProperty="id" order="BEFORE"> 
              SELECT nextval('solardras.solardras_seq') AS id 
		</selectKey>
		INSERT INTO solardras.effective 
			(id, creator
			<if test="effectiveDate != null">,effective</if>
			)
		VALUES
			(#{id}, #{creator}
			<if test="effectiveDate != null">,#{effectiveDate}</if>
			)
	</insert>

	<resultMap id="EffectiveFullResult" type="Effective">
		<result column="id" property="id"/>
		<result column="created" property="created"/>
		<result column="creator" property="creator"/>
		<result column="effective" property="effectiveDate"/>
	</resultMap>
	
	<select id="get-Effective-for-id" resultMap="EffectiveFullResult" parameterType="long">
		SELECT id, created, creator, effective
		FROM solardras.effective
		WHERE id = #{id}
	</select>

	<delete id="delete-Effective" parameterType="long">
		DELETE FROM solardras.effective
		WHERE id = #{id}
	</delete>

</mapper>
